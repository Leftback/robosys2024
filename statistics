#!/bin/bash -xv
# SPDX-FileCopyrightText: 2024 Leftback
# SPDX-License-Identifier: BSD-3-Clause

# Function to handle errors
g () {
    echo "NG at Line $1"
    res=1
}

# Initialize result
res=0

# Test case 1: Normal input
out=$(echo "1,2,3,4,5" | ./statistics)
expected_output="平均値: 3.0
最頻値: No unique mode
中央値: 3
最大値: 5
最小値: 1
範囲: 4
第一四分位数: 1.75
第二四分位数（中央値）: 3
第三四分位数: 4.25
四分位偏差: 1.25
分散: 2.5
標準偏差: 1.5811388300841898"
if [ "$out" != "$expected_output" ]; then
    g $LINENO
fi

# Test case 2: Invalid input (non-numeric character)
out=$(echo "あ" | ./statistics 2>&1)
if [ "$?" != 1 ]; then
    g $LINENO
fi
if [ "$out" != "入力エラー: invalid literal for int() with base 10: 'あ'" ]; then
    g $LINENO
fi

# Test case 3: Empty input
out=$(echo "" | ./statistics 2>&1)
if [ "$?" != 1 ]; then
    g $LINENO
fi
if [ "$out" != "入力エラー: 数列を入力" ]; then
    g $LINENO
fi

# Final result check
if [ "$res" = 0 ]; then
    echo "OK"
else
    echo "Test failed"
fi
exit $res

